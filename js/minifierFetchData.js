const e=document.querySelector(".cards"),t=document.getElementById("modeSwitch"),o=document.querySelector("#search"),n=document.body,c=localStorage.getItem("mode"),a=document.querySelector("#regionSelect"),d=document.querySelector(".loader"),r=document.querySelector(".nav_dark");async function l(t,o){try{const n=await fetch("https://restcountries.com/v3.1/all"),c=await n.json();d.classList.add("none");const a=c.filter((e=>{const n=e.name.common.toLowerCase(),c=e.region.toLowerCase();return(""===t||n.includes(t))&&(""===o||c===o)}));0===a.length?document.querySelector(".notFound").style.display="block":document.querySelector(".notFound").style.display="none",function(t){e.innerHTML="",t.forEach((t=>{let o=document.createDocumentFragment("div"),n=document.createElement("div");n.classList.add("card");let c=document.createElement("img");c.classList.add("card_image");let a=document.createElement("h2"),d=document.createElement("h3"),r=document.createElement("h4"),l=document.createElement("p");o.append(c,a,d,r,l),n.append(o),d.textContent="Population: "+function(e){return e>=1e9?(e/1e9).toFixed(1)+"B":e>=1e6?(e/1e6).toFixed(1)+"M":e>=1e3?(e/1e3).toFixed(1)+"K":e}(t.population),a.textContent=t.name.common,c.src=t.flags.png,l.textContent="Capital: "+(t.capital&&t.capital[0]),r.textContent="Region: "+t.region,e.append(n),n.addEventListener("click",(()=>{!function(e){const t="country.html?country="+encodeURIComponent(e);window.location.href=t}(t.name.common)}))}))}(a)}catch(e){console.log(e)}}"dark"===c?(n.classList.add("change_color"),t.checked=!0,r.textContent="light Mode"):(n.classList.remove("change_color"),t.checked=!1,r.textContent="dark Mode"),t.addEventListener("change",(()=>{t.checked?(n.classList.add("change_color"),localStorage.setItem("mode","dark"),t.checked=!0,r.textContent="light Mode"):(n.classList.remove("change_color"),t.checked=!1,localStorage.setItem("mode","light"),r.textContent="dark Mode")})),o.addEventListener("keyup",(e=>{l(e.target.value.trim().toLowerCase(),a.value.toLowerCase())})),a.addEventListener("change",(e=>{l(o.value.trim().toLowerCase(),e.target.value.toLowerCase())})),l("","");